<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹œë‹ˆì–´ ê°ì • ë³´ê¸°</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/nav.css' %}"> 
    <link rel="stylesheet" href="{% static 'emotion/css/protector/senior_page.css' %}"> 
    <style>
        @import url("{% static 'css/fonts.css' %}");
    </style>
</head>
<body>
    <div id="wrap">
        <main id="main-content">
            <h2>ì‹œë‹ˆì–´</h2>
            <div class="container">
                <div class="header">
                    
                    {% if seniors %}
                        {% for senior in seniors %}
                        <div class="user-info">
                            <div class="user-image">
                                {% if senior.profile_image %}
                                    <img src="{{ senior.profile_image.url }}" alt="Senior Profile Image" class="profile-image-large">
                                {% else %}
                                    <img src="{% static 'img/default_profile.png' %}" alt="Default Profile Image" class="profile-image-large default-profile-image">
                                {% endif %}
                            </div>
                            <div>
                                <div id="user-name">{{ senior.name }} <span id="user-relation">{{ senior.relationship }}</span></div>
                                <div id="user-birthdate">{{ senior.birth_date|date:"Y.m.d" }}</div>
                            </div>
                        </div>
                        <h2>{{ senior.name }}ë‹˜ì˜ ì˜¤ëŠ˜ì˜ í•  ì¼</h2>
                        <div class="section" id="task-list">
                            <!-- í•  ì¼ ëª©ë¡ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤. -->
                        </div>
                        <h2>{{ senior.name }}ë‹˜ì˜ ì˜¤ëŠ˜ì˜ ê°ì •</h2>
                        <div class="section" id="emotion-section">
                            {% if senior.today_emotion %}
                            <div class="emotion-entry">
                                <span class="emoji">
                                    {% if senior.today_emotion.emotion == 'happy' %}
                                        ğŸ˜Š
                                    {% elif senior.today_emotion.emotion == 'neutral' %}
                                        ğŸ˜
                                    {% elif senior.today_emotion.emotion.emotion == 'sad' %}
                                        ğŸ˜¢
                                    {% elif senior.today_emotion.emotion == 'angry' %}
                                        ğŸ˜¡
                                    {% endif %}
                                </span>
                                <div class="details">
                                    <div>
                                        <span id="emotion-one">{{ senior.today_emotion.get_emotion_display }}</span>
                                        <span class="time">{{ senior.today_emotion.time|time:"H:i" }}</span>
                                    </div>
                                    <div class="description">{{ senior.today_emotion.description }}</div>
                                    <form method="get" action="{% url 'add_comment' senior.today_emotion.id %}">
                                        <button type="submit" class="add-comment" {% if senior.has_comment %}disabled{% endif %}>í•œë§ˆë”” ë‚¨ê¸°ê¸°</button>
                                    </form>
                                </div>                                
                            </div>                            
                            {% else %}
                                <p>ì•„ì§ ê¸°ë¡ëœ ê°ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                            {% endif %}
                        </div>                        
                        {% endfor %}
                    {% else %}
                        <p>ë“±ë¡ëœ ì‹œë‹ˆì–´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    {% endif %}
                </div>
            </div>
        </main>
        <footer class="navbar">
            <a href="{% url 'home_senior' %}" class="nav-item">
                <img src="{% static 'img/nav/nav_home_inactive.svg' %}" alt="í™ˆ" class="nav-icon">
                <span class="nav-text">í™ˆ</span>
            </a>
            <a href="{% url 'senior_page' %}" class="nav-item">
                <img src="{% static 'img/nav/nav_building_active.svg' %}" alt="ì‹œë‹ˆì–´" class="nav-icon">
                <span class="nav-text">ì‹œë‹ˆì–´</span>
            </a>
            <a href="{% url 'poke_page' %}" class="nav-item">
                <img src="{% static 'img/nav/nav_finger_inactive.svg' %}" alt="ì½•ì°Œë¥´ê¸°" class="nav-icon">
                <span class="nav-text">ì½•ì°Œë¥´ê¸°</span>
            </a>
            <a href="{% url 'profile' %}" class="nav-item">
                <img src="{% static 'img/nav/nav_user_inactive.svg' %}" alt="ë§ˆì´í˜ì´ì§€" class="nav-icon">
                <span class="nav-text">ë§ˆì´í˜ì´ì§€</span>
            </a>
        </footer>
    </div>
    <script src="{% static 'emotion/js/protector/senior_page.js' %}"></script>
</body>
</html>
